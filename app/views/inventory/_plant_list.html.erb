<div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Variety</th>
        <% unless hide_category %>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
        <% end %>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Viability</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Active Purchases</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200">
      <% plants.each do |plant| %>
        <tr class="hover:bg-gray-50">
          <td class="px-6 py-4 text-sm">
            <div class="font-medium text-gray-900">
              <%= link_to plant.name, plant_path(plant, back_to: request.fullpath), class: "text-green-700 hover:text-green-900 hover:underline", data: { turbo_frame: "_top" } %>
              <% if plant.heirloom? %>
                <span class="inline-flex items-center ml-1.5 px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">Heirloom</span>
              <% end %>
            </div>
            <% if plant.latin_name.present? %>
              <div class="text-gray-500 italic text-xs mt-0.5"><%= plant.latin_name %></div>
            <% end %>
          </td>
          <% unless hide_category %>
            <td class="px-6 py-4 text-sm text-gray-500">
              <%= plant.plant_category.name %>
              <% if plant.plant_subcategory.present? %>
                <span class="text-gray-400">&rsaquo;</span> <%= plant.plant_subcategory.name %>
              <% end %>
            </td>
          <% end %>
          <td class="px-6 py-4 text-sm">
            <% status = plant.best_viability_status %>
            <% if status %>
              <%= render ViabilityBadgeComponent.new(status: status) %>
            <% else %>
              <span class="text-xs text-gray-400">No purchases</span>
            <% end %>
          </td>
          <td class="px-6 py-4 text-sm text-gray-500">
            <%= plant.active_purchases.size %>
          </td>
        </tr>
      <% end %>
      <% if plants.empty? %>
        <tr>
          <td colspan="<%= hide_category ? 3 : 4 %>" class="px-6 py-8 text-center text-sm text-gray-500">
            No plants found in this section.
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
